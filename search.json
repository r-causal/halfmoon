[{"path":"https://r-causal.github.io/halfmoon/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 halfmoon authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://r-causal.github.io/halfmoon/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Malcolm Barrett. Author, maintainer, copyright holder.","code":""},{"path":"https://r-causal.github.io/halfmoon/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Barrett M (2023). halfmoon: Techniques Build Better Balance. https://github.com/r-causal/halfmoon, https://r-causal.github.io/halfmoon/.","code":"@Manual{,   title = {halfmoon: Techniques to Build Better Balance},   author = {Malcolm Barrett},   year = {2023},   note = {https://github.com/r-causal/halfmoon, https://r-causal.github.io/halfmoon/}, }"},{"path":"https://r-causal.github.io/halfmoon/index.html","id":"halfmoon-","dir":"","previous_headings":"","what":"Techniques to Build Better Balance","title":"Techniques to Build Better Balance","text":"Within light darkness, try understand darkness. Within darkness light, look light. Light darkness pair like foot foot behind walking. – Zen teaching poem Sandokai. goal halfmoon cultivate balance propensity score models.","code":""},{"path":"https://r-causal.github.io/halfmoon/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Techniques to Build Better Balance","text":"can install recent version halfmoon CRAN : can also install development version halfmoon GitHub :","code":"install.packages(\"halfmoon\") # install.packages(\"devtools\") devtools::install_github(\"malcolmbarrett/halfmoon\")"},{"path":"https://r-causal.github.io/halfmoon/index.html","id":"example-weighting","dir":"","previous_headings":"","what":"Example: Weighting","title":"Techniques to Build Better Balance","text":"halfmoon includes several techniques assessing balance created propensity score weights.","code":"library(halfmoon) library(ggplot2)  # weighted mirrored histograms ggplot(nhefs_weights, aes(.fitted)) +   geom_mirror_histogram(     aes(group = qsmk),     bins = 50   ) +   geom_mirror_histogram(     aes(fill = qsmk, weight = w_ate),     bins = 50,     alpha = 0.5   ) + scale_y_continuous(labels = abs) # weighted ecdf ggplot(   nhefs_weights,   aes(x = smokeyrs, color = qsmk) ) +   geom_ecdf(aes(weights = w_ato)) +   xlab(\"Smoking Years\") +   ylab(\"Proportion <= x\") # weighted SMDs plot_df <- tidy_smd(   nhefs_weights,   race:active,   .group = qsmk,   .wts = starts_with(\"w_\") )  ggplot(   plot_df,   aes(     x = abs(smd),     y = variable,     group = method,     color = method   ) ) +   geom_love()"},{"path":"https://r-causal.github.io/halfmoon/index.html","id":"example-matching","dir":"","previous_headings":"","what":"Example: Matching","title":"Techniques to Build Better Balance","text":"halfmoon also support working matched datasets. Consider two objects MatchIt documentation: One option just look matched dataset halfmoon:  downside can’t compare multiple matching strategies observed dataset; label plot also wrong. halfmoon comes helper function, bind_matches(), creates dataset appropriate task: matches includes binary variable matchit object indicates row included match . Since downweighting 0 equivalent filtering datasets matches, can easily compare multiple matched datasets .wts:  can also extend idea matching indicators weights weighted mirrored histograms, giving us good idea range propensity scores removed dataset.","code":"library(MatchIt) # Default: 1:1 NN PS matching w/o replacement m.out1 <- matchit(treat ~ age + educ + race + nodegree +                    married + re74 + re75, data = lalonde)  # 1:1 NN Mahalanobis distance matching w/ replacement and # exact matching on married and race m.out2 <- matchit(treat ~ age + educ + race + nodegree +                    married + re74 + re75, data = lalonde,                    distance = \"mahalanobis\", replace = TRUE,                   exact = ~ married + race) matched_data <- get_matches(m.out1)  match_smd <- tidy_smd(   matched_data,   c(age, educ, race, nodegree, married, re74, re75),    .group = treat )  love_plot(match_smd) matches <- bind_matches(lalonde, m.out1, m.out2) head(matches) #>      treat age educ   race married nodegree re74 re75       re78 m.out1 m.out2 #> NSW1     1  37   11  black       1        1    0    0  9930.0460      1      1 #> NSW2     1  22    9 hispan       0        1    0    0  3595.8940      1      1 #> NSW3     1  30   12  black       0        0    0    0 24909.4500      1      1 #> NSW4     1  27   11  black       0        1    0    0  7506.1460      1      1 #> NSW5     1  33    8  black       0        1    0    0   289.7899      1      1 #> NSW6     1  22    9  black       0        1    0    0  4056.4940      1      1 many_matched_smds <- tidy_smd(   matches,   c(age, educ, race, nodegree, married, re74, re75),    .group = treat,    .wts = c(m.out1, m.out2) )   love_plot(many_matched_smds) # use the distance as the propensity score matches$ps <- m.out1$distance  ggplot(matches, aes(ps)) +     geom_mirror_histogram(         aes(group = factor(treat)),         bins = 50     ) +     geom_mirror_histogram(         aes(fill = factor(treat), weight = m.out1),         bins = 50,         alpha = 0.5     ) + scale_y_continuous(labels = abs)"},{"path":"https://r-causal.github.io/halfmoon/reference/geom_ecdf.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate weighted and unweighted empirical cumulative distributions — geom_ecdf","title":"Calculate weighted and unweighted empirical cumulative distributions — geom_ecdf","text":"empirical cumulative distribution function (ECDF) provides alternative visualization distribution. geom_ecdf() similar ggplot2::stat_ecdf() can also calculate weighted ECDFs.","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/geom_ecdf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate weighted and unweighted empirical cumulative distributions — geom_ecdf","text":"","code":"geom_ecdf(   mapping = NULL,   data = NULL,   geom = \"step\",   position = \"identity\",   ...,   n = NULL,   pad = TRUE,   na.rm = FALSE,   show.legend = NA,   inherit.aes = TRUE )"},{"path":"https://r-causal.github.io/halfmoon/reference/geom_ecdf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate weighted and unweighted empirical cumulative distributions — geom_ecdf","text":"mapping Set aesthetic mappings created aes(). specified inherit.aes = TRUE (default), combined default mapping top level plot. must supply mapping plot mapping. data data displayed layer. three options: NULL, default, data inherited plot data specified call ggplot(). data.frame, object, override plot data. objects fortified produce data frame. See fortify() variables created. function called single argument, plot data. return value must data.frame, used layer data. function can created formula (e.g. ~ head(.x, 10)). geom geometric object use display data, either ggproto Geom subclass string naming geom stripped geom_ prefix (e.g. \"point\" rather \"geom_point\") position Position adjustment, either string naming adjustment (e.g. \"jitter\" use position_jitter), result call position adjustment function. Use latter need change settings adjustment. ... arguments passed layer(). often aesthetics, used set aesthetic fixed value, like colour = \"red\" size = 3. may also parameters paired geom/stat. n NULL, interpolate. NULL, number points interpolate . pad TRUE, pad ecdf additional points (-Inf, 0) (Inf, 1) na.rm FALSE (default), removes missing values warning.  TRUE silently removes missing values. show.legend logical. layer included legends? NA, default, includes aesthetics mapped. FALSE never includes, TRUE always includes. can also named logical vector finely select aesthetics display. inherit.aes FALSE, overrides default aesthetics, rather combining . useful helper functions define data aesthetics inherit behaviour default plot specification, e.g. borders().","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/geom_ecdf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate weighted and unweighted empirical cumulative distributions — geom_ecdf","text":"geom","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/geom_ecdf.html","id":"aesthetics","dir":"Reference","previous_headings":"","what":"Aesthetics","title":"Calculate weighted and unweighted empirical cumulative distributions — geom_ecdf","text":"addition aesthetics ggplot2::stat_ecdf(), geom_ecdf() also accepts: weights","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/geom_ecdf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate weighted and unweighted empirical cumulative distributions — geom_ecdf","text":"","code":"library(ggplot2)  ggplot(   nhefs_weights,   aes(x = smokeyrs, color = qsmk) ) +   geom_ecdf(aes(weights = w_ato)) +   xlab(\"Smoking Years\") +   ylab(\"Proportion <= x\")"},{"path":"https://r-causal.github.io/halfmoon/reference/geom_mirror_histogram.html","id":null,"dir":"Reference","previous_headings":"","what":"Create mirrored histograms — geom_mirror_histogram","title":"Create mirrored histograms — geom_mirror_histogram","text":"Create mirrored histograms","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/geom_mirror_histogram.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create mirrored histograms — geom_mirror_histogram","text":"","code":"geom_mirror_histogram(   mapping = NULL,   data = NULL,   position = \"stack\",   ...,   binwidth = NULL,   bins = NULL,   na.rm = FALSE,   orientation = NA,   show.legend = NA,   inherit.aes = TRUE )"},{"path":"https://r-causal.github.io/halfmoon/reference/geom_mirror_histogram.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create mirrored histograms — geom_mirror_histogram","text":"mapping Set aesthetic mappings created aes(). specified inherit.aes = TRUE (default), combined default mapping top level plot. must supply mapping plot mapping. data data displayed layer. three options: NULL, default, data inherited plot data specified call ggplot(). data.frame, object, override plot data. objects fortified produce data frame. See fortify() variables created. function called single argument, plot data. return value must data.frame, used layer data. function can created formula (e.g. ~ head(.x, 10)). position Position adjustment, either string naming adjustment (e.g. \"jitter\" use position_jitter), result call position adjustment function. Use latter need change settings adjustment. ... arguments passed layer(). often aesthetics, used set aesthetic fixed value, like colour = \"red\" size = 3. may also parameters paired geom/stat. binwidth width bins. Can specified numeric value function calculates width unscaled x. , \"unscaled x\" refers original x values data, application scale transformation. specifying function along grouping structure, function called per group. default use number bins bins, covering range data. always override value, exploring multiple widths find best illustrate stories data. bin width date variable number days time; bin width time variable number seconds. bins Number bins. Overridden binwidth. Defaults 30. na.rm FALSE, default, missing values removed warning. TRUE, missing values silently removed. orientation orientation layer. default (NA) automatically determines orientation aesthetic mapping. rare event fails can given explicitly setting orientation either \"x\" \"y\". See Orientation section detail. show.legend logical. layer included legends? NA, default, includes aesthetics mapped. FALSE never includes, TRUE always includes. can also named logical vector finely select aesthetics display. inherit.aes FALSE, overrides default aesthetics, rather combining . useful helper functions define data aesthetics inherit behaviour default plot specification, e.g. borders().","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/geom_mirror_histogram.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create mirrored histograms — geom_mirror_histogram","text":"geom","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/geom_mirror_histogram.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create mirrored histograms — geom_mirror_histogram","text":"","code":"library(ggplot2) ggplot(nhefs_weights, aes(.fitted)) +   geom_mirror_histogram(     aes(group = qsmk),     bins = 50   ) +   geom_mirror_histogram(     aes(fill = qsmk, weight = w_ate),     bins = 50,     alpha = 0.5   ) +   scale_y_continuous(labels = abs)"},{"path":"https://r-causal.github.io/halfmoon/reference/nhefs_weights.html","id":null,"dir":"Reference","previous_headings":"","what":"NHEFS with various propensity score weights — nhefs_weights","title":"NHEFS with various propensity score weights — nhefs_weights","text":"dataset containing various propensity score weights causaldata::nhefs_complete.","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/nhefs_weights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"NHEFS with various propensity score weights — nhefs_weights","text":"","code":"nhefs_weights"},{"path":"https://r-causal.github.io/halfmoon/reference/nhefs_weights.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"NHEFS with various propensity score weights — nhefs_weights","text":"data frame 1566 rows 14 variables: qsmk Quit smoking race Race age Age sex Sex education Education level smokeintensity Smoking intensity smokeyrs Number smoke-years exercise Exercise level active Daily activity level wt71 Participant weight 1971 (baseline) w_ate ATE weight w_att ATT weight w_atc ATC weight w_atm ATM weight w_ato ATO weight .fitted Propensity score","code":""},{"path":"https://r-causal.github.io/halfmoon/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. tidyselect contains, ends_with, everything, last_col, matches, num_range, one_of, peek_vars, starts_with tidysmd bind_matches, geom_love, love_plot, tidy_smd","code":""},{"path":"https://r-causal.github.io/halfmoon/news/index.html","id":"halfmoon-0109000","dir":"Changelog","previous_headings":"","what":"halfmoon 0.1.0.9000","title":"halfmoon 0.1.0.9000","text":"Added NEWS.md file track changes package.","code":""}]
