<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Balance Kolmogorov-Smirnov (KS) Statistic for Two Groups — bal_ks • halfmoon</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Balance Kolmogorov-Smirnov (KS) Statistic for Two Groups — bal_ks"><meta name="description" content="Computes the two-sample KS statistic comparing empirical cumulative distribution
functions (CDFs) between two groups. For binary variables, returns the absolute
difference in proportions. For continuous variables, computes the maximum
difference between empirical CDFs."><meta property="og:description" content="Computes the two-sample KS statistic comparing empirical cumulative distribution
functions (CDFs) between two groups. For binary variables, returns the absolute
difference in proportions. For continuous variables, computes the maximum
difference between empirical CDFs."><meta property="og:image" content="https://r-causal.github.io/halfmoon/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">halfmoon</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-causal/halfmoon/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Balance Kolmogorov-Smirnov (KS) Statistic for Two Groups</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-causal/halfmoon/blob/main/R/compute_balance.R" class="external-link"><code>R/compute_balance.R</code></a></small>
      <div class="d-none name"><code>bal_ks.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes the two-sample KS statistic comparing empirical cumulative distribution
functions (CDFs) between two groups. For binary variables, returns the absolute
difference in proportions. For continuous variables, computes the maximum
difference between empirical CDFs.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bal_ks</span><span class="op">(</span><span class="va">covariate</span>, <span class="va">group</span>, weights <span class="op">=</span> <span class="cn">NULL</span>, reference_group <span class="op">=</span> <span class="cn">NULL</span>, na.rm <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-covariate">covariate<a class="anchor" aria-label="anchor" href="#arg-covariate"></a></dt>
<dd><p>A numeric vector containing the covariate values to compare.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>A vector (factor or numeric) indicating group membership. Must
have exactly two unique levels.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>An optional numeric vector of case weights. If provided, must
have the same length as other input vectors. All weights must be non-negative.</p></dd>


<dt id="arg-reference-group">reference_group<a class="anchor" aria-label="anchor" href="#arg-reference-group"></a></dt>
<dd><p>The reference group level for comparisons. Can be either
a group level value or a numeric index. If <code>NULL</code> (default), uses the first level.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>A logical value indicating whether to remove missing values
before computation. If <code>FALSE</code> (default), missing values in the input
will produce <code>NA</code> in the output.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A numeric value representing the KS statistic. Values range from 0 to 1,
with 0 indicating identical distributions and 1 indicating completely separate
distributions.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The Kolmogorov-Smirnov statistic measures the maximum difference between
empirical cumulative distribution functions of two groups:
$$KS = \max_x |F_1(x) - F_0(x)|$$
where \(F_1(x)\) and \(F_0(x)\) are the empirical CDFs of the treatment
and control groups.</p>
<p>For binary variables, this reduces to the absolute difference in proportions.
For continuous variables, the statistic captures differences in the entire
distribution shape, not just means or variances.</p>
<p>The KS statistic ranges from 0 (identical distributions) to 1 (completely
separate distributions). Smaller values indicate better distributional balance
between groups.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="check_balance.html">check_balance()</a></code> for computing multiple balance metrics at once</p>
<p>Other balance functions:
<code><a href="bal_corr.html">bal_corr</a>()</code>,
<code><a href="bal_smd.html">bal_smd</a>()</code>,
<code><a href="bal_vr.html">bal_vr</a>()</code>,
<code><a href="check_auc.html">check_auc</a>()</code>,
<code><a href="check_balance.html">check_balance</a>()</code>,
<code><a href="check_ess.html">check_ess</a>()</code>,
<code><a href="plot_balance.html">plot_balance</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Binary exposure</span></span></span>
<span class="r-in"><span><span class="fu">bal_ks</span><span class="op">(</span><span class="va">nhefs_weights</span><span class="op">$</span><span class="va">age</span>, <span class="va">nhefs_weights</span><span class="op">$</span><span class="va">qsmk</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1295593</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With weights</span></span></span>
<span class="r-in"><span><span class="fu">bal_ks</span><span class="op">(</span><span class="va">nhefs_weights</span><span class="op">$</span><span class="va">wt71</span>, <span class="va">nhefs_weights</span><span class="op">$</span><span class="va">qsmk</span>,</span></span>
<span class="r-in"><span>       weights <span class="op">=</span> <span class="va">nhefs_weights</span><span class="op">$</span><span class="va">w_ate</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.03583763</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Categorical exposure (returns named vector)</span></span></span>
<span class="r-in"><span><span class="fu">bal_ks</span><span class="op">(</span><span class="va">nhefs_weights</span><span class="op">$</span><span class="va">age</span>, <span class="va">nhefs_weights</span><span class="op">$</span><span class="va">alcoholfreq_cat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lt_12_per_year_vs_none  1_4_per_month_vs_none   2_3_per_week_vs_none </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              0.1956535              0.2913630              0.2637864 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          daily_vs_none </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              0.1774359 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Specify reference group</span></span></span>
<span class="r-in"><span><span class="fu">bal_ks</span><span class="op">(</span><span class="va">nhefs_weights</span><span class="op">$</span><span class="va">age</span>, <span class="va">nhefs_weights</span><span class="op">$</span><span class="va">alcoholfreq_cat</span>,</span></span>
<span class="r-in"><span>       reference_group <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lt_12_per_year_vs_none  1_4_per_month_vs_none   2_3_per_week_vs_none </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              0.1956535              0.2913630              0.2637864 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          daily_vs_none </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              0.1774359 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With categorical weights</span></span></span>
<span class="r-in"><span><span class="fu">bal_ks</span><span class="op">(</span><span class="va">nhefs_weights</span><span class="op">$</span><span class="va">wt71</span>, <span class="va">nhefs_weights</span><span class="op">$</span><span class="va">alcoholfreq_cat</span>,</span></span>
<span class="r-in"><span>       weights <span class="op">=</span> <span class="va">nhefs_weights</span><span class="op">$</span><span class="va">w_cat_ate</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lt_12_per_year_vs_none  1_4_per_month_vs_none   2_3_per_week_vs_none </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             0.07483474             0.05665006             0.07013520 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          daily_vs_none </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             0.06446345 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Malcolm Barrett.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

