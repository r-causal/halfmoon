% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_qq.R
\name{qq}
\alias{qq}
\title{Compute QQ plot data for weighted and unweighted samples}
\usage{
qq(
  .data,
  .var,
  .group,
  .wts = NULL,
  quantiles = seq(0.01, 0.99, 0.01),
  include_observed = TRUE,
  treatment_level = NULL,
  na.rm = FALSE
)
}
\arguments{
\item{.data}{A data frame containing the variables.}

\item{.var}{Variable to compute quantiles for. Can be unquoted (e.g., \code{age})
or quoted (e.g., \code{"age"}).}

\item{.group}{Column name of treatment/group variable. Can be unquoted
(e.g., \code{qsmk}) or quoted (e.g., \code{"qsmk"}).}

\item{.wts}{Optional weighting variable(s). Can be unquoted variable names,
a character vector, or NULL. Multiple weights can be provided to compare
different weighting schemes. Default is NULL (unweighted).}

\item{quantiles}{Numeric vector of quantiles to compute. Default is
\code{seq(0.01, 0.99, 0.01)} for 99 quantiles.}

\item{include_observed}{Logical. If using \code{.wts}, also compute observed
(unweighted) quantiles? Defaults to TRUE.}

\item{treatment_level}{The reference treatment level to use for comparisons.
If \code{NULL} (default), uses the last level for factors or the maximum value for numeric variables.}

\item{na.rm}{Logical; if TRUE, drop NA values before computation.}
}
\value{
A tibble with columns:
\item{method}{Character. The weighting method ("observed" or weight variable name).}
\item{quantile}{Numeric. The quantile probability (0-1).}
\item{x_quantiles}{Numeric. The quantile value for the reference group.}
\item{y_quantiles}{Numeric. The quantile value for the comparison group.}
}
\description{
Calculate quantile-quantile data comparing the distribution of a variable
between treatment groups. This function computes the quantiles for both
groups and returns a tidy data frame suitable for plotting or further analysis.
}
\examples{
# Basic QQ data (observed only)
qq(nhefs_weights, age, qsmk)

# With weighting
qq(nhefs_weights, age, qsmk, .wts = w_ate)

# Compare multiple weighting schemes
qq(nhefs_weights, age, qsmk, .wts = c(w_ate, w_att))

# Custom quantiles
qq(nhefs_weights, age, qsmk,
   .wts = w_ate,
   quantiles = c(0.1, 0.25, 0.5, 0.75, 0.9))

}
