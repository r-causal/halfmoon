% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_balance.R
\name{bal_vr}
\alias{bal_vr}
\title{Balance Variance Ratio for Two Groups}
\usage{
bal_vr(covariate, group, weights = NULL, reference_group = NULL, na.rm = FALSE)
}
\arguments{
\item{covariate}{A numeric vector containing the covariate values to compare.}

\item{group}{A vector (factor or numeric) indicating group membership. Must
have exactly two unique levels.}

\item{weights}{An optional numeric vector of case weights. If provided, must
have the same length as other input vectors. All weights must be non-negative.}

\item{reference_group}{The reference group level for comparisons. Can be either
a group level value or a numeric index. If \code{NULL} (default), uses the first level.}

\item{na.rm}{A logical value indicating whether to remove missing values
before computation. If \code{FALSE} (default), missing values in the input
will produce \code{NA} in the output.}
}
\value{
A numeric value representing the variance ratio. Values greater than 1
indicate the comparison group has higher variance than the reference group.
}
\description{
Calculates the ratio of variances between two groups: var(comparison) / var(reference).
For binary variables, uses the p*(1-p) variance formula. For continuous variables,
uses Bessel's correction for weighted sample variance.
}
\details{
The variance ratio compares the variability of a covariate between treatment groups.
It is calculated as:
\deqn{VR = \frac{s_1^2}{s_0^2}}
where \eqn{s_1^2} and \eqn{s_0^2} are the variances of the treatment and control groups.

For binary variables (0/1), variance is computed as \eqn{p(1-p)} where \eqn{p} is the
proportion of 1s in each group. For continuous variables, the weighted sample variance
is used with Bessel's correction when weights are provided.

Values close to 1.0 indicate similar variability between groups, which is desirable
for balance. Values substantially different from 1.0 suggest imbalanced variance.
}
\examples{
# Binary exposure
bal_vr(nhefs_weights$age, nhefs_weights$qsmk)

# With weights
bal_vr(nhefs_weights$wt71, nhefs_weights$qsmk,
       weights = nhefs_weights$w_ate)

# Categorical exposure (returns named vector)
bal_vr(nhefs_weights$age, nhefs_weights$alcoholfreq_cat)

# Specify reference group
bal_vr(nhefs_weights$age, nhefs_weights$alcoholfreq_cat,
       reference_group = "weekly")

# With categorical weights
bal_vr(nhefs_weights$wt71, nhefs_weights$alcoholfreq_cat,
       weights = nhefs_weights$w_cat_ate)

}
\seealso{
\code{\link[=check_balance]{check_balance()}} for computing multiple balance metrics at once

Other balance functions: 
\code{\link{bal_corr}()},
\code{\link{bal_ks}()},
\code{\link{bal_smd}()},
\code{\link{check_auc}()},
\code{\link{check_balance}()},
\code{\link{plot_balance}()}
}
\concept{balance functions}
