% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_balance.R
\name{check_balance}
\alias{check_balance}
\title{Check Balance Across Multiple Metrics}
\usage{
check_balance(
  .data,
  .vars,
  .group,
  .wts = NULL,
  .metrics = c("smd", "vr", "ks", "energy"),
  include_observed = TRUE,
  reference_group = 1L,
  na.rm = FALSE,
  make_dummy_vars = TRUE,
  squares = FALSE,
  cubes = FALSE,
  interactions = FALSE
)
}
\arguments{
\item{.data}{A data frame containing the variables to analyze.}

\item{.vars}{Variables for which to calculate metrics. Can be unquoted
variable names, a character vector, or a tidyselect expression.}

\item{.group}{Grouping variable, e.g., treatment or exposure group.}

\item{.wts}{Optional weighting variables. Can be unquoted variable names,
a character vector, or NULL. Multiple weights can be provided to compare
different weighting schemes.}

\item{.metrics}{Character vector specifying which metrics to compute.
Available options: "smd" (standardized mean difference), "vr" (variance ratio),
"ks" (Kolmogorov-Smirnov), "correlation" (for continuous exposures),
"energy" (multivariate energy distance). Defaults to c("smd", "vr", "ks", "energy").}

\item{include_observed}{Logical. If using \code{.wts}, also calculate observed
(unweighted) metrics? Defaults to TRUE.}

\item{reference_group}{The reference group level to use for comparisons.
Defaults to 1 (first level).}

\item{na.rm}{A logical value indicating whether to remove missing values
before computation. If \code{FALSE} (default), missing values in the input
will produce \code{NA} in the output.}

\item{make_dummy_vars}{Logical. Transform categorical variables to dummy
variables using \code{model.matrix()}? Defaults to TRUE. When TRUE, categorical
variables are expanded into separate binary indicators for each level.}

\item{squares}{Logical. Include squared terms for continuous variables?
Defaults to FALSE. When TRUE, adds squared versions of numeric variables.}

\item{cubes}{Logical. Include cubed terms for continuous variables?
Defaults to FALSE. When TRUE, adds cubed versions of numeric variables.}

\item{interactions}{Logical. Include all pairwise interactions between
variables? Defaults to FALSE. When TRUE, creates interaction terms for
all variable pairs, excluding interactions between levels of the same
categorical variable and between squared/cubed terms.}
}
\value{
A tibble with columns:
\item{variable}{Character. The variable name being analyzed.}
\item{group_level}{Character. The non-reference group level.}
\item{method}{Character. The weighting method ("observed" or weight variable name).}
\item{metric}{Character. The balance metric computed ("smd", "vr", "ks").}
\item{estimate}{Numeric. The computed balance statistic.}
}
\description{
Computes balance statistics for multiple variables across different groups and
optional weighting schemes. This function generalizes balance checking by
supporting multiple metrics (SMD, variance ratio, Kolmogorov-Smirnov, weighted correlation) and
returns results in a tidy format.
}
\details{
This function serves as a comprehensive balance assessment tool by computing multiple
balance metrics simultaneously. It automatically handles different variable types and
can optionally transform variables (dummy coding, polynomial terms, interactions)
before computing balance statistics.

The function supports several balance metrics:
\itemize{
\item \strong{SMD (Standardized Mean Difference)}: Measures effect size between groups,
with values around 0.1 or smaller generally indicating good balance
\item \strong{Variance Ratio}: Compares group variances, with values near 1.0 indicating
similar variability between groups
\item \strong{Kolmogorov-Smirnov}: Tests distributional differences between groups,
with smaller values indicating better balance
\item \strong{Correlation}: For continuous exposures, measures linear association
between covariate and exposure
\item \strong{Energy Distance}: Multivariate test comparing entire distributions
}

When multiple weighting schemes are provided, the function computes balance
for each method, enabling comparison of different approaches (e.g., ATE vs ATT weights).
The \code{include_observed} parameter controls whether unweighted ("observed") balance
is included in the results.
}
\examples{
# Basic usage with all metrics
check_balance(nhefs_weights, c(age, wt71), qsmk, .wts = c(w_ate, w_att))

# With specific metrics only
check_balance(nhefs_weights, c(age, wt71), qsmk, .metrics = c("smd", "energy"))

# Exclude observed results
check_balance(nhefs_weights, c(age, wt71), qsmk, .wts = w_ate, include_observed = FALSE)

# Use correlation for continuous exposure
check_balance(mtcars, c(mpg, hp), disp, .metrics = c("correlation", "energy"))

# With dummy variables for categorical variables (default behavior)
check_balance(nhefs_weights, c(age, sex, race), qsmk)

# Without dummy variables for categorical variables
check_balance(nhefs_weights, c(age, sex, race), qsmk, make_dummy_vars = FALSE)
}
\seealso{
\code{\link[=bal_smd]{bal_smd()}}, \code{\link[=bal_vr]{bal_vr()}}, \code{\link[=bal_ks]{bal_ks()}}, \code{\link[=bal_corr]{bal_corr()}}, \code{\link[=bal_energy]{bal_energy()}} for individual metric functions

Other balance functions: 
\code{\link{bal_corr}()},
\code{\link{bal_ks}()},
\code{\link{bal_smd}()},
\code{\link{bal_vr}()},
\code{\link{check_auc}()}
}
\concept{balance functions}
